import{d as s,L as a,J as d,o as r,b as u,e as i,h as c,g as f,f as p}from"./modules/vue-BMF23GvP.js";import{u as m}from"./slidev/context-Cvh0cx8b.js";const w={class:"grid grid-cols-1 w-full h-full"},v={class:"slidev-layout default",style:{padding:"0rem"}},I=s({__name:"livecoding",props:{image:{type:String},title:{type:String},class:{type:String}},setup(g){m();const n=a("livecoding-video");async function l(){if(window.LIVECODING_ASKED)return;window.LIVECODING_ASKED=!0;const e=await navigator.mediaDevices.getDisplayMedia();window.LIVECODING=e,window.open("/","_blank","x=y")}function t(){const e=window.opener===null?window.LIVECODING:window.opener.LIVECODING;if(e===null||typeof e>"u"){console.log("stream not found"),setTimeout(()=>{t()},1e3);return}if(!n.value){console.log("video ref not found"),setTimeout(()=>{t()},1e3);return}let o=n.value;o.autoplay=!0,o.muted=!0,o.srcObject=e}return window.location.href.indexOf("presenter")>-1&&typeof window.LIVECODING>"u"&&l(),d(()=>{t()}),(e,o)=>(r(),u("div",w,[i("div",{class:"w-full w-full",style:c(e.style)},null,4),i("div",v,[f(`<video ref="livecoding-video"></video>
            <div style="position: absolute; top: 0px; left: 0px; background-color: #333333; color: #FFFFFF; padding: 0.2em;"><small>Watch me fail live!</small></div>
        `),p(e.$slots,"default")])]))}});export{I as _};
